function CronUI(e,r){if(e instanceof HTMLElement)this.el=e;else{if("string"!=typeof e)throw"CronUI: container parameter in initialization must be an html element or a string selector.";this.el=document.querySelector(containerSelector)}var o=r?r:{};this.current_value=o.initial,this.render(),"string"==typeof o.initial&&this.setCronString(o.initial)}CronUI.prototype.render=function(){for(var e=this.el,r="",o=0;60>o;o++){var t=10>o?"0":"";r+="<option value='"+o+"'>"+t+o+"</option>\n"}for(var n="",o=0;24>o;o++){var t=10>o?"0":"";n+="<option value='"+o+"'>"+t+o+"</option>\n"}for(var i="",o=1;32>o;o++){if(1==o||21==o||31==o)var c="st";else if(2==o||22==o)var c="nd";else if(3==o||23==o)var c="rd";else var c="th";i+="<option value='"+o+"'>"+o+c+"</option>\n"}for(var s="",a=["January","February","March","April","May","June","July","August","September","October","November","December"],o=0;o<a.length;o++)s+="<option value='"+(o+1)+"'>"+a[o]+"</option>\n";for(var l="",u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=0;o<u.length;o++)l+="<option value='"+o+"'>"+u[o]+"</option>\n";for(var m="",d=["minute","hour","day","week","month","year"],o=0;o<d.length;o++)m+="<option value='"+d[o]+"'>"+d[o]+"</option>\n";var y={};e.insertAdjacentHTML("beforeend","<span class='cron-period'><select>"+m+"</select></span>"),e.querySelector(".cron-period select").addEventListener("change",this.periodChanged.bind(this)),e.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-dom'> on the <select name='cron-dom'>"+i+"</select> </span>"),y.dom=e.querySelector(".cron-block-dom"),e.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-month'> of <select name='cron-month'>"+s+"</select> </span>"),y.month=e.querySelector(".cron-block-month"),e.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-mins'> at <select name='cron-mins'>"+r+"</select> minutes past the hour </span>"),y.mins=e.querySelector(".cron-block-mins"),e.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-dow'> on <select name='cron-dow'>"+l+"</select> </span>"),y.dow=e.querySelector(".cron-block-dow"),e.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-time'> at <select name='cron-time-hour' class='cron-time-hour'>"+n+"</select>:<select name='cron-time-min' class='cron-time-min'>"+r+" </span>"),y.time=e.querySelector(".cron-block-time"),this.blocks=y},CronUI.prototype.periodChanged=function(){var e=this.blocks,r=this.el.querySelector(".cron-period select"),o=r.options[r.selectedIndex].value;for(var t in e)e[t].style.display="none";if(CronUI.displayMatrix.hasOwnProperty(o))for(var n=CronUI.displayMatrix[o],i=0;i<n.length;i++)e[n[i]].style.display=""},CronUI.prototype.getCronString=function(){var e,r,o,t,n;e=r=o=t=n="*";var i=this.blocks,c=function(e){return e.options[e.selectedIndex].value},s=c(this.el.querySelector(".cron-period select"));switch(s){case"minute":break;case"hour":e=c(i.mins.querySelector("select"));break;case"day":e=c(i.time.querySelector(".cron-time-min")),r=c(i.time.querySelector(".cron-time-hour"));break;case"week":e=c(i.time.querySelector(".cron-time-min")),r=c(i.time.querySelector(".cron-time-hour")),n=c(i.dow.querySelector("select"));break;case"month":e=c(i.time.querySelector(".cron-time-min")),r=c(i.time.querySelector(".cron-time-hour")),o=c(i.dom.querySelector("select"));break;case"year":e=c(i.time.querySelector(".cron-time-min")),r=c(i.time.querySelector(".cron-time-hour")),o=c(i.dom.querySelector("select")),t=c(i.month.querySelector("select"));break;default:return s}return[e,r,o,t,n].join(" ")},CronUI.prototype.setCronString=function(e){var r=this.blocks,o=CronUI.getCronType(e);if(!o)return!1;for(var t=e.split(" "),n={mins:t[0],hour:t[1],dom:t[2],month:t[3],dow:t[4]},i=CronUI.displayMatrix[o],c=0;c<i.length;c++){var s=i[c];"time"==s?(r[s].querySelector(".cron-time-hour").value=n.hour,r[s].querySelector(".cron-time-min").value=n.mins):r[s].querySelector("select").value=n[s]}return this.el.querySelector(".cron-period select").value=o,this.periodChanged(),this},CronUI.displayMatrix={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},CronUI.cronTypes={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}\d{1,2}$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/},CronUI.getCronType=function(e){e=e?e:this.getCronString();var r=/^((\d{1,2}|\*)\s){4}(\d{1,2}|\*)$/;if("string"==typeof e&&r.test(e)){for(var o=e.split(" "),t=[0,0,1,1,0],n=[59,23,31,12,6],i=0;i<o.length;i++)if("*"!=o[i]){var c=parseInt(o[i]);if(!(c<=n[i]&&c>=t[i]))return}for(var s in CronUI.cronTypes)if(CronUI.cronTypes[s].test(e))return s}};